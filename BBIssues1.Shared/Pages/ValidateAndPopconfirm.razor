@page "/ValidateAndPopconfirm"
<h3>ValidateAndPopconfirm</h3>
<Alert>
    <ul>
        <li>在姓名中输入一个超过10个字符的值</li>
        <li>点击"保存"按钮，并确定后。这个保存按钮将一直保持在Disable状态，无法再使用。即使修正在姓名的字符长度，也无法再使用保存按钮。</li>
    </ul>
</Alert>
<ValidateForm Model="Req" OnValidSubmit="SubmitOnClick">
    <p>
        <BootstrapInput @bind-Value="Req.Name"></BootstrapInput>
    </p>
    <p>
        <PopConfirmButton Color="Color.Primary" Text="保存" ButtonType="ButtonType.Submit" IsAsync="true"></PopConfirmButton>
    </p>
</ValidateForm>

@code {
    [Inject]
    private SwalService? ss { get; set; }
    private StruReq Req { get; set; } = new();
    private class StruReq
    {
        [Required, MaxLength(10),Display(Name = "姓名")]
        public string Name { get; set; } = string.Empty;
    }
    private async Task SubmitOnClick(EditContext context)
    {

        await Task.Delay(2000);

        if (ss is not null)
        {
            await ss.Show(new SwalOption()
                {
                    Content = "完成"
                });
        }


    }
}
